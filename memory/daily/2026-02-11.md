# 2026-02-11 每日笔记

## 项目整理

### 前端代码迁移与清理
- 删除根目录的 `package.json`, `package-lock.json`
- 将所有前端依赖整合到 `web/package.json`
- 确保前端独立构建与部署

### Phase 4: Candle Feature + Web UI 集成完成
- 添加 Candle feature gates 支持
- Web UI 与 Rust API 集成测试通过
- 文档整理完成

## 技术决策

### 文档体系重组
- 创建 `docs/archive/2025/` 归档历史文档
- 将 2025 年所有 MVP 完成报告归档
- 将 2026 年 Phase 0-4 完成文档移至 `docs/reports/completed/`
- 创建 `docs/README.md` 文档导航索引
- 创建 `docs/PROJECT_STATUS.md` 项目状态概览

### 清理冗余文件
- 删除空目录 `tests/` (测试在各 crate 内)
- 删除运行时目录 `.pids/`
- 更新 `.gitignore` 确保运行时文件不被提交

### 运维脚本增强 - Docker 模式 Web 服务支持

创建以下文件以支持 Docker 模式下 Web 服务：
- `web/Dockerfile`: 多阶段构建镜像 (构建 + nginx 托管)
- `web/nginx.conf`: nginx 配置，包含 API 代理和静态文件服务
- `web/.dockerignore`: 优化 Docker 构建上下文

更新以下文件：
- `docker-compose.yml`: 添加 web 服务定义，依赖 synton-db
- `synton-ops.sh`:
  - 添加 `DOCKER_COMPOSE` 变量自动检测命令
  - 添加 `DOCKER_SERVICES` 数组包含 web
  - 更新 `show_status` Docker 模式显示 web 端口
  - 更新 `cmd_start_docker` 启动后显示 web URL
  - 更新帮助信息说明 web 在两种模式下都启动

### 运维脚本增强 - Docker 模式 Web 服务支持

创建以下文件以支持 Docker 模式下 Web 服务：
- `web/Dockerfile`: 多阶段构建镜像 (构建 + nginx 托管)
- `web/nginx.conf`: nginx 配置，包含 API 代理和静态文件服务
- `web/.dockerignore`: 优化 Docker 构建上下文

更新以下文件：
- `docker-compose.yml`: 添加 web 服务定义，依赖 synton-db
- `synton-ops.sh`:
  - 添加 `DOCKER_COMPOSE` 变量自动检测命令
  - 添加 `DOCKER_SERVICES` 数组包含 web
  - 更新 `show_status` Docker 模式显示 web 端口
  - 更新 `cmd_start_docker` 启动后显示 web URL
  - 更新帮助信息说明 web 在两种模式下都启动

### 前端 API 集成修复

修复前端与后端 API 交互问题：

1. **依赖缺失**: 运行 `npm install` 安装 `@tailwindcss/vite`
2. **Vite 代理配置**: 修正端口从 5578 到 5570 (vite.config.ts)
3. **TraverseDirection 枚举不匹配**:
   - 后端使用 Pascal case: `Forward`, `Backward`, `Both`
   - 前端使用小写字符串: `'forward'`, `'backward'`, `'both'`
   - 修复 5 个文件中的方向值

修改文件：
- `web/vite.config.ts`: 代理目标端口 5578 → 5570
- `web/src/types/api.ts`: TraverseDirection 类型定义
- `web/src/pages/Graph.tsx`: 2 处 direction 值
- `web/src/pages/Edges.tsx`: 1 处 direction 值
- `web/src/pages/NodeDetail.tsx`: 1 处 direction 值
- `web/src/pages/Traverse.tsx`: DIRECTIONS 常量和默认值
- `web/src/components/graph/NodeInspector.tsx`: 1 处 direction 值

## 下一步计划

### 短期 (本周)
1. 性能基准测试框架搭建
2. 并发压力测试
3. 分页支持实现

### 中期 (本月)
1. Swagger UI 可视化界面
2. Docker 部署优化
3. 生产环境配置标准化

### 长期
1. 分布式存储支持
2. 多租户隔离
3. 实时流式处理

---

*记录时间: 2026-02-11 23:30*
