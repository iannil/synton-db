# SYNTON-DB

[![Rust](https://img.shields.io/badge/Rust-1.75+-orange.svg)](https://www.rust-lang.org/)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](./LICENSE)

[English](README.md)

---

## é¡¹ç›®æ¦‚è¿°

SYNTON-DB æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºå¤§è¯­è¨€æ¨¡å‹è®¾è®¡çš„è®°å¿†æ•°æ®åº“ï¼Œé€šè¿‡ç»“åˆçŸ¥è¯†å›¾è°±å’Œå‘é‡æ£€ç´¢ï¼Œæä¾›è¯­ä¹‰å…³è”ã€é€»è¾‘æ¨ç†å’ŒåŠ¨æ€è®°å¿†èƒ½åŠ›ã€‚

ä¸ä¼ ç»Ÿæ•°æ®åº“ï¼ˆSQLã€NoSQLã€Vectorï¼‰ä¸“æ³¨äº CRUD æ“ä½œä¸åŒï¼ŒSYNTON-DB åŸºäºä¸‰å¤§æ ¸å¿ƒåŸåˆ™æ„å»ºï¼š

- å…¥åº“å³ç†è§£ - è‡ªåŠ¨ä»è¾“å…¥ä¸­æå–çŸ¥è¯†å›¾è°±
- æŸ¥è¯¢å³æ¨ç† - æ··åˆå‘é‡ç›¸ä¼¼åº¦ + å›¾éå†
- è¾“å‡ºå³ä¸Šä¸‹æ–‡ - è¿”å›é¢„å¤„ç†çš„ä¸Šä¸‹æ–‡åŒ…ï¼Œè€ŒéåŸå§‹æ•°æ®

### è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

ä¼ ç»Ÿæ•°æ®åº“å­˜å‚¨å’Œæ£€ç´¢æ•°æ®ä½†ç¼ºä¹è¯­ä¹‰ç†è§£ã€‚SYNTON-DBï¼š

1. ç†è§£å®ä½“ä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸ä»…æ˜¯å†…å®¹ç›¸ä¼¼åº¦
2. é€šè¿‡è®°å¿†è¡°å‡å’Œå¼ºåŒ–ç»´æŒæ—¶é—´ä¸Šä¸‹æ–‡
3. é€šè¿‡å›¾éå†è¿›è¡Œå¤šè·³æ¨ç†
4. ä¸º LLM ä¼˜åŒ–åˆæˆä¸Šä¸‹æ–‡

### æ ¸å¿ƒå·®å¼‚

| ç‰¹æ€§ | ä¼ ç»Ÿæ•°æ®åº“ | SYNTON-DB |
| ------ | ----------- | ----------- |
| å­˜å‚¨ | è¡¨/æ–‡æ¡£/å‘é‡ | å¼ é‡å›¾ï¼ˆå¸¦å‘é‡çš„èŠ‚ç‚¹ + å¸¦å…³ç³»çš„è¾¹ï¼‰ |
| æŸ¥è¯¢ | SQL/å‘é‡æœç´¢ | PaQLï¼ˆæç¤ºå³æŸ¥è¯¢è¯­è¨€ï¼‰ |
| æ£€ç´¢ | åŸºäºç›¸ä¼¼åº¦ | Graph-RAGï¼ˆå‘é‡ + å›¾éå†ï¼‰ |
| è®°å¿† | é™æ€ | åŠ¨æ€ï¼ˆåŸºäºè®¿é—®çš„è¡°å‡/å¼ºåŒ–ï¼‰ |
| è¾“å‡º | åŸå§‹è¡Œ/åˆ— | åˆæˆçš„ä¸Šä¸‹æ–‡åŒ… |

---

## æ ¸å¿ƒç‰¹æ€§

### å¼ é‡å›¾å­˜å‚¨ï¼ˆTensor-Graphï¼‰

- èŠ‚ç‚¹åŒ…å«å†…å®¹ä¸å¯é€‰å‘é‡åµŒå…¥
- è¾¹ä»£è¡¨é€»è¾‘å…³ç³»ï¼ˆis_aã€causesã€contradicts ç­‰ï¼‰
- æ”¯æŒ 4 ç§èŠ‚ç‚¹ç±»å‹ï¼š`entity`ï¼ˆå®ä½“ï¼‰ã€`concept`ï¼ˆæ¦‚å¿µï¼‰ã€`fact`ï¼ˆäº‹å®ï¼‰ã€`raw_chunk`ï¼ˆåŸå§‹ç‰‡æ®µï¼‰
- æ”¯æŒ 7 ç§å…³ç³»ç±»å‹ï¼š`is_a`ï¼ˆæ˜¯ï¼‰ã€`is_part_of`ï¼ˆå±äºï¼‰ã€`causes`ï¼ˆå¯¼è‡´ï¼‰ã€`similar_to`ï¼ˆç›¸ä¼¼ï¼‰ã€`contradicts`ï¼ˆçŸ›ç›¾ï¼‰ã€`happened_after`ï¼ˆå‘ç”Ÿäºï¼‰ã€`belongs_to`ï¼ˆå½’å±äºï¼‰

### Graph-RAG æ··åˆæ£€ç´¢

- ç»“åˆå‘é‡ç›¸ä¼¼åº¦æœç´¢ä¸å¤šè·³å›¾éå†
- å¯é…ç½®å‘é‡ä¸å›¾è¯„åˆ†çš„æƒé‡
- è¿”å›å¸¦ç½®ä¿¡åº¦åˆ†æ•°çš„æ’åºç»“æœ
- å¯é…ç½®éå†æ·±åº¦å’Œç»“æœé™åˆ¶

### PaQLï¼ˆæç¤ºå³æŸ¥è¯¢è¯­è¨€ï¼‰

- è‡ªç„¶è¯­è¨€æŸ¥è¯¢è§£æå™¨
- æ”¯æŒé€»è¾‘è¿ç®—ç¬¦ï¼ˆANDã€ORã€NOTï¼‰
- æ”¯æŒè¿‡æ»¤å™¨å’Œå›¾éå†æŸ¥è¯¢
- ä¸º LLM ç”Ÿæˆçš„æŸ¥è¯¢ä¼˜åŒ–

### è®°å¿†è¡°å‡æœºåˆ¶

- è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿å®ç°
- åŸºäºè®¿é—®åˆ†æ•°çš„ä¿ç•™ç­–ç•¥ï¼ˆ0.0-10.0 åˆ†ï¼‰
- å‘¨æœŸæ€§è¡°å‡è®¡ç®—
- å¯é…ç½®çš„ä¿ç•™é˜ˆå€¼

### åŒåè®® API

- REST APIï¼ˆç«¯å£ 8080ï¼‰- åŸºäº HTTP çš„ JSON
- gRPC APIï¼ˆç«¯å£ 50051ï¼‰- é«˜æ€§èƒ½äºŒè¿›åˆ¶åè®®
- ä¸º Web å®¢æˆ·ç«¯å¯ç”¨ CORS

---

## å¿«é€Ÿå¼€å§‹

### Docker Composeï¼ˆæ¨èï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/synton-db/synton-db.git
cd synton-db

# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆæ•°æ®åº“ + ç›‘æ§ï¼‰
docker-compose up -d

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f synton-db
```

æš´éœ²çš„æœåŠ¡ï¼š

- `8080` - REST API
- `50051` - gRPC API
- `9090` - Prometheus æŒ‡æ ‡
- `3000` - Grafana ä»ªè¡¨æ¿

### ä»æºç æ„å»º

```bash
# å‰ç½®è¦æ±‚ï¼šRust 1.75+ã€Git

# æ„å»ºæœåŠ¡å™¨
cargo build --release -p synton-db-server

# æ„å»º CLI å·¥å…·
cargo build --release -p synton-cli

# è¿è¡ŒæœåŠ¡å™¨
./target/release/synton-db-server --config config.toml
```

### éªŒè¯

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# è·å–ç»Ÿè®¡ä¿¡æ¯
curl http://localhost:8080/stats
```

---

## CLI ä½¿ç”¨

`synton-cli` å·¥å…·æä¾›å…¨é¢çš„å‘½ä»¤è¡Œç•Œé¢ã€‚

### è¿æ¥é€‰é¡¹

```bash
synton-cli --host <ä¸»æœº> --port <ç«¯å£> --format <text|json> [å‘½ä»¤]
```

### èŠ‚ç‚¹æ“ä½œ

```bash
# åˆ›å»ºèŠ‚ç‚¹
synton-cli node create "å·´é»æ˜¯æ³•å›½çš„é¦–éƒ½" --node-type fact

# é€šè¿‡ ID è·å–èŠ‚ç‚¹
synton-cli node get <uuid>

# åˆ é™¤èŠ‚ç‚¹ï¼ˆå¸¦ç¡®è®¤ï¼‰
synton-cli node delete <uuid>

# å¼ºåˆ¶åˆ é™¤ï¼ˆè·³è¿‡ç¡®è®¤ï¼‰
synton-cli node delete <uuid> --force

# åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹
synton-cli node list --limit 100
```

### è¾¹æ“ä½œ

```bash
# åœ¨èŠ‚ç‚¹é—´åˆ›å»ºè¾¹
synton-cli edge create <æºèŠ‚ç‚¹ID> <ç›®æ ‡èŠ‚ç‚¹ID> --relation is_part_of --weight 0.9

# åˆ—å‡ºèŠ‚ç‚¹çš„è¾¹
synton-cli edge list <èŠ‚ç‚¹ID> --limit 100
```

### æŸ¥è¯¢æ“ä½œ

```bash
# æ‰§è¡Œ PaQL æŸ¥è¯¢
synton-cli query execute "é¦–éƒ½åŸå¸‚" --limit 10
```

### ç³»ç»Ÿæ“ä½œ

```bash
# è·å–æ•°æ®åº“ç»Ÿè®¡
synton-cli stats

# è·å–è¯¦ç»†ç»Ÿè®¡
synton-cli stats --detailed

# å¯¼å‡ºæ•°æ®ä¸º JSON
synton-cli export --format json --output backup.json

# ä» JSON å¯¼å…¥æ•°æ®
synton-cli import --format json --input backup.json

# å¯¼å…¥æ—¶é‡åˆ°é”™è¯¯ç»§ç»­
synton-cli import --format json --input backup.json --continue-on-error
```

---

## API ç«¯ç‚¹

### REST APIï¼ˆç«¯å£ 8080ï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
| ------ | ------ | ------ |
| `/health` | GET | å¥åº·æ£€æŸ¥ |
| `/stats` | GET | æ•°æ®åº“ç»Ÿè®¡ |
| `/nodes` | GET | åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹ |
| `/nodes` | POST | åˆ›å»ºæ–°èŠ‚ç‚¹ |
| `/nodes/:id` | GET | æŒ‰ ID è·å–èŠ‚ç‚¹ |
| `/nodes/:id` | DELETE | æŒ‰ ID åˆ é™¤èŠ‚ç‚¹ |
| `/edges` | POST | åˆ›å»ºæ–°è¾¹ |
| `/query` | POST | æ‰§è¡Œ PaQL æŸ¥è¯¢ |
| `/traverse` | POST | å›¾éå† |
| `/bulk` | POST | æ‰¹é‡æ“ä½œ |

#### è¯·æ±‚/å“åº”ç¤ºä¾‹

å¥åº·æ£€æŸ¥

```bash
curl http://localhost:8080/health
```

```json
{
  "status": "healthy",
  "version": "0.1.0",
  "uptime_secs": 0
}
```

åˆ›å»ºèŠ‚ç‚¹

```bash
curl -X POST http://localhost:8080/nodes \
  -H "Content-Type: application/json" \
  -d '{
    "content": "å·´é»æ˜¯æ³•å›½çš„é¦–éƒ½",
    "node_type": "fact"
  }'
```

```json
{
  "node": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "content": "å·´é»æ˜¯æ³•å›½çš„é¦–éƒ½",
    "node_type": "fact",
    "embedding": null,
    "meta": {
      "created_at": "2025-02-05T10:00:00Z",
      "access_score": 5.0
    }
  },
  "created": true
}
```

æ‰§è¡ŒæŸ¥è¯¢

```bash
curl -X POST http://localhost:8080/query \
  -H "Content-Type: application/json" \
  -d '{
    "query": "é¦–éƒ½",
    "limit": 10,
    "include_metadata": false
  }'
```

```json
{
  "nodes": [...],
  "total_count": 5,
  "execution_time_ms": 12,
  "truncated": false
}
```

åˆ›å»ºè¾¹

```bash
curl -X POST http://localhost:8080/edges \
  -H "Content-Type: application/json" \
  -d '{
    "source": "<uuid-1>",
    "target": "<uuid-2>",
    "relation": "is_part_of",
    "weight": 0.9
  }'
```

æ‰¹é‡æ“ä½œ

```bash
curl -X POST http://localhost:8080/bulk \
  -H "Content-Type: application/json" \
  -d '{
    "nodes": [
      {"content": "èŠ‚ç‚¹1", "node_type": "entity"},
      {"content": "èŠ‚ç‚¹2", "node_type": "concept"}
    ],
    "edges": []
  }'
```

### gRPC APIï¼ˆç«¯å£ 50051ï¼‰

gRPC API æä¾›ç›¸åŒåŠŸèƒ½ï¼Œåœ¨é«˜ååé‡åœºæ™¯ä¸‹æ€§èƒ½æ›´ä½³ã€‚è¯·å‚é˜… `crates/api/src/grpc.rs` äº†è§£ Protocol Buffers å®šä¹‰ã€‚

---

## é¡¹ç›®ç»“æ„

```text
synton-db/
â”œâ”€â”€ crates/
â”‚   â”œâ”€â”€ bin/          # æœåŠ¡å™¨äºŒè¿›åˆ¶ âœ…
â”‚   â”œâ”€â”€ cli/          # å‘½ä»¤è¡Œå·¥å…· âœ…
â”‚   â”œâ”€â”€ core/         # æ ¸å¿ƒç±»å‹ï¼ˆNodeã€Edgeã€Relationï¼‰âœ…
â”‚   â”œâ”€â”€ storage/      # RocksDB + Lance å­˜å‚¨ âœ…
â”‚   â”œâ”€â”€ vector/       # å‘é‡ç´¢å¼• âœ…
â”‚   â”œâ”€â”€ graph/        # å›¾éå†ç®—æ³• âœ…
â”‚   â”œâ”€â”€ graphrag/     # æ··åˆæœç´¢å®ç° âœ…
â”‚   â”œâ”€â”€ paql/         # æŸ¥è¯¢è¯­è¨€è§£æå™¨ âœ…
â”‚   â”œâ”€â”€ memory/       # è®°å¿†è¡°å‡ç®¡ç† âœ…
â”‚   â””â”€â”€ api/          # REST + gRPC API å±‚ âœ…
â”œâ”€â”€ e2e/              # ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆ39 ä¸ªæµ‹è¯•ï¼‰âœ…
â”œâ”€â”€ release/          # å‘å¸ƒæ–‡ä»¶
â”‚   â””â”€â”€ docker/       # Docker é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/             # æ–‡æ¡£
â”‚   â”œâ”€â”€ progress/     # è¿›è¡Œä¸­çš„æ–‡æ¡£
â”‚   â””â”€â”€ reports/      # å·²å®Œæˆçš„æŠ¥å‘Š
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â””â”€â”€ Cargo.toml
```

### æ¶æ„æ¦‚è§ˆ

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ¥å£å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   REST API       â”‚        â”‚    gRPC API      â”‚          â”‚
â”‚  â”‚   (Axum)         â”‚        â”‚    (Tonic)       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®¤çŸ¥è®¡ç®—å±‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     PaQL         â”‚  â”‚  Graph-RAG  â”‚  â”‚  è®°å¿†ç®¡ç†     â”‚  â”‚
â”‚  â”‚   è§£æå™¨         â”‚  â”‚   æœç´¢      â”‚  â”‚   (è¡°å‡)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 å¼ é‡å›¾å­˜å‚¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚    RocksDB       â”‚        â”‚     Lance        â”‚          â”‚
â”‚  â”‚  (å›¾å­˜å‚¨)        â”‚        â”‚  (å‘é‡å­˜å‚¨)      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŸºç¡€è®¾æ–½å±‚                               â”‚
â”‚                   Rust + Tokio è¿è¡Œæ—¶                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é…ç½®

### é…ç½®æ–‡ä»¶

åˆ›å»º `config.toml` æ–‡ä»¶æˆ–ä½¿ç”¨ `release/docker/config.toml` ä¸­çš„é»˜è®¤é…ç½®ï¼š

```toml
[server]
# ç»‘å®šåœ°å€
host = "0.0.0.0"

# gRPC æœåŠ¡å™¨ç«¯å£
grpc_port = 50051

# REST API æœåŠ¡å™¨ç«¯å£
rest_port = 8080

# å¯ç”¨/ç¦ç”¨æœåŠ¡å™¨
grpc_enabled = true
rest_enabled = true

[storage]
# RocksDB æ•°æ®ç›®å½•
rocksdb_path = "./data/rocksdb"

# Lance æ•°æ®ç›®å½•
lance_path = "./data/lance"

# RocksDB æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°
max_open_files = 5000

# RocksDB ç¼“å­˜å¤§å°ï¼ˆMBï¼‰
cache_size_mb = 256

# å¯ç”¨é¢„å†™æ—¥å¿—
wal_enabled = true

[memory]
# é—å¿˜æ›²çº¿è¡°å‡å°ºåº¦ï¼ˆå¤©ï¼‰
decay_scale = 20.0

# ä¿ç•™é˜ˆå€¼ï¼ˆ0.0-1.0ï¼‰
retention_threshold = 0.1

# æ–°èŠ‚ç‚¹åˆå§‹è®¿é—®åˆ†æ•°
initial_access_score = 5.0

# æ¯æ¬¡è®¿é—®çš„åˆ†æ•°æå‡
access_boost = 0.5

# å¯ç”¨å‘¨æœŸæ€§è¡°å‡è®¡ç®—
periodic_decay_enabled = false

# è¡°å‡è®¡ç®—é—´éš”ï¼ˆç§’ï¼‰
decay_interval_secs = 3600

[logging]
# æ—¥å¿—çº§åˆ«ï¼štraceã€debugã€infoã€warnã€error
level = "info"

# å¯ç”¨ JSON æ ¼å¼æ—¥å¿—
json_format = false

# å¯ç”¨è¿½è¸ªè¾“å‡º
tracing_enabled = true

[graphrag]
# å›¾éå†æœ€å¤§æ·±åº¦
max_traversal_depth = 3

# æ··åˆæœç´¢è¿”å›çš„æœ€å¤§èŠ‚ç‚¹æ•°
max_results = 10

# å‘é‡ç›¸ä¼¼åº¦æƒé‡ï¼ˆ0.0-1.0ï¼‰
vector_weight = 0.7

# å›¾é‚»è¿‘åº¦æƒé‡ï¼ˆ0.0-1.0ï¼‰
graph_weight = 0.3

# å¯ç”¨ç½®ä¿¡åº¦è¯„åˆ†
confidence_scoring = true
```

### ç¯å¢ƒå˜é‡

å¯é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®ï¼š

| å˜é‡ | æè¿° | é»˜è®¤å€¼ |
| ------ | ------ | -------- |
| `SYNTON_SERVER_HOST` | æœåŠ¡å™¨ç»‘å®šåœ°å€ | `0.0.0.0` |
| `SYNTON_SERVER_GRPC_PORT` | gRPC ç«¯å£ | `50051` |
| `SYNTON_SERVER_REST_PORT` | REST API ç«¯å£ | `8080` |
| `SYNTON_STORAGE_ROCKSDB_PATH` | RocksDB æ•°æ®è·¯å¾„ | `./data/rocksdb` |
| `SYNTON_STORAGE_LANCE_PATH` | Lance æ•°æ®è·¯å¾„ | `./data/lance` |
| `SYNTON_LOG_LEVEL` | æ—¥å¿—çº§åˆ« | `info` |

---

## å¼€å‘

### å‰ç½®è¦æ±‚

- Rust 1.75+
- Node.js 18+ï¼ˆç”¨äº E2E æµ‹è¯•ï¼‰
- Docker & Docker Composeï¼ˆç”¨äºå®¹å™¨åŒ–æµ‹è¯•ï¼‰

### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
cargo test

# å•å…ƒæµ‹è¯•ï¼ˆå¸¦è¾“å‡ºï¼‰
cargo test -- --nocapture

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_add_node

# E2E æµ‹è¯•
cd e2e
npm install
npx playwright install
npm test

# E2E æµ‹è¯•ï¼ˆå¯è§æµè§ˆå™¨ï¼‰
npm run test:headed

# E2E æµ‹è¯•æŠ¥å‘Š
npm run test:report
```

### ä»£ç è´¨é‡

```bash
# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# æ£€æŸ¥æ ¼å¼
cargo fmt --check

# Clint æ£€æŸ¥
cargo clippy

# å°†è­¦å‘Šè§†ä¸ºé”™è¯¯
cargo clippy -- -D warnings

# ç”Ÿæˆæ–‡æ¡£
cargo doc --open

# ç”Ÿæˆæ‰€æœ‰ crate çš„æ–‡æ¡£
cargo doc --document-private-items --open
```

### æ„å»º

```bash
# Debug æ„å»º
cargo build

# Release æ„å»ºï¼ˆä¼˜åŒ–ï¼‰
cargo build --release

# æ„å»ºç‰¹å®š crate
cargo build -p synton-db-server

# ä½¿ç”¨ç‰¹æ€§æ„å»º
cargo build --features all
```

### Docker å¼€å‘

```bash
# æ„å»º Docker é•œåƒ
docker build -t synton-db:dev .

# è¿è¡Œå®¹å™¨
docker run -p 8080:8080 -p 50051:50051 synton-db:dev

# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®è¿è¡Œ
docker run -v $(pwd)/config.toml:/etc/synton-db/config.toml synton-db:dev
```

---

## è®¾è®¡ç†å¿µ

> ä¼ ç»Ÿæ•°æ®åº“çš„æ ¸å¿ƒæ˜¯ CRUDï¼Œè¿½æ±‚ ACID æˆ– CAPã€‚
> è®¤çŸ¥æ•°æ®åº“çš„æ ¸å¿ƒæ˜¯ï¼šæ„ŸçŸ¥ã€å…³è”ã€å›å¿†å’Œè¿›åŒ–ã€‚

### å…¥åº“å³ç†è§£

ä¼ ç»Ÿæ•°æ®åº“æŒ‰åŸæ ·å­˜å‚¨æ•°æ®ã€‚SYNTON-DB è‡ªåŠ¨ï¼š

- æå–å®ä½“å’Œå…³ç³»
- æ„å»ºçŸ¥è¯†å›¾è°±
- åˆ›å»ºè¯­ä¹‰åµŒå…¥
- å»ºç«‹æ—¶é—´ä¸Šä¸‹æ–‡

### æŸ¥è¯¢å³æ¨ç†

ä¼ ç»Ÿæ•°æ®åº“åŒ¹é…æ¨¡å¼ã€‚SYNTON-DBï¼š

- ç»“åˆå‘é‡ç›¸ä¼¼åº¦ä¸å›¾éå†
- é€šè¿‡è¿æ¥èŠ‚ç‚¹è·Ÿè¸ªé€»è¾‘é“¾
- æŒ‰ç½®ä¿¡åº¦å’Œç›¸å…³æ€§åŠ æƒç»“æœ
- è¿”å›ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¿¡æ¯

### è¾“å‡ºå³ä¸Šä¸‹æ–‡

ä¼ ç»Ÿæ•°æ®åº“è¿”å›åŸå§‹è¡Œã€‚SYNTON-DBï¼š

- åˆæˆç›¸å…³ä¿¡æ¯
- å‹ç¼©å’Œä¼˜å…ˆæ’åºä¸Šä¸‹æ–‡
- ä¸º LLM æ¶ˆè´¹æ ¼å¼åŒ–è¾“å‡º
- ç»´æŠ¤å‡ºå¤„å’Œç½®ä¿¡åº¦

---

## è·¯çº¿å›¾

### å·²å®Œæˆ âœ…

- [x] æ ¸å¿ƒæ•°æ®æ¨¡å‹ï¼ˆNodeã€Edgeã€Relationï¼‰
- [x] å­˜å‚¨å±‚ï¼ˆRocksDB + Lance åç«¯ï¼‰
- [x] å‘é‡ç´¢å¼•ï¼ˆLance é›†æˆï¼‰
- [x] å›¾éå†ï¼ˆBFS/DFS ç®—æ³•ï¼‰
- [x] Graph-RAG æ··åˆæ£€ç´¢
- [x] PaQL æŸ¥è¯¢è§£æå™¨
- [x] è®°å¿†è¡°å‡ç®¡ç†
- [x] REST + gRPC åŒ API
- [x] å…¨åŠŸèƒ½ CLI å·¥å…·
- [x] Docker éƒ¨ç½²
- [x] E2E æµ‹è¯•å¥—ä»¶ï¼ˆ39 ä¸ªæµ‹è¯•ï¼‰
- [x] Prometheus + Grafana ç›‘æ§
- [x] é…ç½®ç®¡ç†

### è®¡åˆ’ä¸­ ğŸš§

- [ ] ML åµŒå…¥æ¨¡å‹é›†æˆï¼ˆCandle/ONNXï¼‰
- [ ] åˆ†å¸ƒå¼å­˜å‚¨æ”¯æŒ
- [ ] WebUI æ§åˆ¶å°
- [ ] é«˜çº§ PaQL è¯­æ³•ç‰¹æ€§
- [ ] å¤‡ä»½/æ¢å¤å·¥å…·
- [ ] è®¿é—®æ§åˆ¶å’Œèº«ä»½éªŒè¯
- [ ] æŸ¥è¯¢ç¼“å­˜å±‚
- [ ] é«˜çº§å‘Šè­¦ç³»ç»Ÿ
- [ ] å¤šæ¨¡å‹åµŒå…¥æ”¯æŒ

---

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š

1. ä»£ç é£æ ¼ï¼šéµå¾ª Rust çº¦å®šå¹¶ä½¿ç”¨ `cargo fmt`
2. æµ‹è¯•ï¼šä¸ºæ–°åŠŸèƒ½ç¼–å†™æµ‹è¯•ï¼ˆç›®æ ‡è¦†ç›–ç‡ 80%ï¼‰
3. æäº¤ï¼šä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼ï¼ˆ`feat:`ã€`fix:`ã€`docs:` ç­‰ï¼‰
4. æ–‡æ¡£ï¼šæ›´æ–°ç›¸å…³æ–‡æ¡£ä»¥åæ˜ å˜æ›´
5. PRï¼šæä¾›æ¸…æ™°çš„æè¿°å¹¶é“¾æ¥ç›¸å…³ issue

### å¼€å‘æµç¨‹

```bash
# 1. Fork å¹¶å…‹éš†ä»“åº“
git clone https://github.com/iannil/synton-db.git

# 2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feat/your-feature

# 3. è¿›è¡Œæ›´æ”¹å¹¶æµ‹è¯•
cargo test
cargo clippy

# 4. ä½¿ç”¨çº¦å®šæ ¼å¼æäº¤
git commit -m "feat: æ·»åŠ åŠŸèƒ½æè¿°"

# 5. æ¨é€å¹¶åˆ›å»º PR
git push origin feat/your-feature
```

---

## è®¸å¯è¯

Apache License 2.0

---

## é“¾æ¥

- ä»“åº“ï¼š[https://github.com/synton-db/synton-db](https://github.com/synton-db/synton-db)
- æ–‡æ¡£ï¼š[docs/](./docs/)
- é—®é¢˜ï¼š[https://github.com/synton-db/synton-db/issues](https://github.com/synton-db/synton-db/issues)
- è®¨è®ºï¼š[https://github.com/synton-db/synton-db/discussions](https://github.com/synton-db/synton-db/discussions)
